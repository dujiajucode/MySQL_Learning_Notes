# 插入数据(INSERT)

**没有输出** INSERT语句一般不会产生输出。

INSERT是用来插入(或添加)行到数据库表的。插入可 以用几种方式使用:

* 插入完整的行;
* 插入行的一部分;

* 插入多行;
* 插入某些查询的结果。

## 插入完整的行

```mysql
# 不安全的做法
INSERT INTO 表名 VALUES ('列值1','列值2','列值3');

# 安全的做法
INSERT INTO 表名(列名1，列名2，列名3) VALUES ('列值1','列值2','列值3');
```

**虽然这种语法很简单，但并不安全，应该尽量避免使用。**上面的SQL  语句高度依赖于表中列的定义次序，并且还依赖于其次序容易获得的信息。即使可得到这种次序信息，也不能保证下一次表结构变动后各个列保持完全相同的次序。因此，编写依赖于特定列次序的SQL语句是很不安全的。如果这样做，有时难免会出问题。

**总是使用列的列表** 一般不要使用没有明确给出列的列表的 INSERT语句。使用列的列表能使SQL代码继续发挥作用，即使 表结构发生了变化。

**仔细地给出值** 不管使用哪种INSERT语法，都必须给出 VALUES的正确数目。如果不提供列名，则必须给每个表列提供 一个值。如果提供列名，则必须对每个列出的列给出一个值。 如果不这样，将产生一条错误消息，相应的行插入不成功。

**省略列** 如果表的定义允许，则可以在INSERT操作中省略某些列。省略的列必须满足以下某个条件。

* 该列定义为允许NULL值(无值或空值)。

* 在表定义中给出默认值。这表示如果不给出值，将使用默认值。

如果对表中不允许NULL值且没有默认值的列不给出值，则 MySQL将产生一条错误消息，并且相应的行插入不成功。

## 插入多个行

只要每条INSERT语句中的列名(和次序)相同，可以如下组合各语句:
```mysql
INSERT INTO 表名(列名1，列名2，列名3) VALUES ('列值1','列值2','列值3'), ('列值4','列值2','列值3'), ('列值7','列值2','列值3');
```


其中单条INSERT语句有多组值，每组值用一对圆括号括起来， 用逗号分隔。

**提高INSERT的性能** 此技术可以提高数据库处理的性能，因 为MySQL用单条INSERT语句处理多个插入比使用多条INSERT 语句快。

## 插入检索出的数据

INSERT一般用来给表插入一个指定列值的行。

但是，INSERT还存在 另一种形式，可以利用它将一条SELECT语句的结果插入表中。

这就是所谓的INSERT SELECT，顾名思义，它是由一条INSERT语句和一条SELECT语句组成的。
```mysql
INSERT INTO customers[表名](列名1，列名2，列名3) SELECT (列名1，列名2，列名3) FROM custnew(需要查询的表名);
```

这个例子使用INSERT SELECT从**custnew**中将所有数据导入customers。

SELECT语句从custnew检索出要插入的值，而不是列出它们。

SELECT中列出的每个列对应于customers表名后所跟的列表中的每个列。

这条语句将插入多少行有赖于custnew表中有多少行。 如果这个表为空，则没有行被插入(也不产生错误，因为操作仍然是合法的)。

如果这个表确实含有数据，则所有数据将被插入到customers。

这个例子导入了cust_id(假设你能够确保cust_id的值不重复)。你也可以简单地省略这列(从INSERT和SELECT中)，这样MySQL就会生成新值。 

**INSERTSELECT中的列名** 为简单起见，这个例子在INSERT和 SELECT语句中使用了相同的列名。但是，不一定要求列名匹配。 事实上，MySQL甚至不关心SELECT返回的列名。它使用的是列的位置，因此SELECT中的第一列(不管其列名)将用来填充表列中指定的第一个列，第二列将用来填充表列中指定的第二个列，如此等等。这对于从使用不同列名的表中导入数据是非常有用的。